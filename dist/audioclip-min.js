!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.AudioClip=t()}}(function(){var t;return function e(t,n,o){function i(u,f){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!f&&a)return a(u,!0);if(r)return r(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var s=n[u]={exports:{}};t[u][0].call(s.exports,function(e){var n=t[u][1][e];return i(n?n:e)},s,s.exports,e,t,n,o)}return n[u].exports}for(var r="function"==typeof require&&require,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(e,n,o){(function(e){!function(e){function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function i(){for(var t=0;t<T.length;t++)T[t][0](T[t][1]);T=[],v=!1}function r(t,e){T.push([t,e]),v||(v=!0,P(i,0))}function u(t,e){function n(t){c(e,t)}function o(t){p(e,t)}try{t(n,o)}catch(i){o(i)}}function f(t){var e=t.owner,n=e.state_,o=e.data_,i=t[n],r=t.then;if("function"==typeof i){n=j;try{o=i(o)}catch(u){p(r,u)}}a(r,o)||(n===j&&c(r,o),n===x&&p(r,o))}function a(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==typeof e)){var o=e.then;if("function"==typeof o)return o.call(e,function(o){n||(n=!0,e!==o?c(t,o):s(t,o))},function(e){n||(n=!0,p(t,e))}),!0}}catch(i){return n||p(t,i),!0}return!1}function c(t,e){t!==e&&a(t,e)||s(t,e)}function s(t,e){t.state_===g&&(t.state_=_,t.data_=e,r(d,t))}function p(t,e){t.state_===g&&(t.state_=_,t.data_=e,r(h,t))}function l(t){var e=t.then_;t.then_=void 0;for(var n=0;n<e.length;n++)f(e[n])}function d(t){t.state_=j,l(t)}function h(t){t.state_=x,l(t)}function y(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof y==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],u(t,this)}var m=e.Promise,w=m&&"resolve"in m&&"reject"in m&&"all"in m&&"race"in m&&function(){var t;return new m(function(e){t=e}),"function"==typeof t}();"undefined"!=typeof o&&o?(o.Promise=w?m:y,o.Polyfill=y):"function"==typeof t&&t.amd?t(function(){return w?m:y}):w||(e.Promise=y);var v,g="pending",_="sealed",j="fulfilled",x="rejected",b=function(){},P="undefined"!=typeof setImmediate?setImmediate:setTimeout,T=[];y.prototype={constructor:y,state_:g,then_:null,data_:void 0,then:function(t,e){var n={owner:this,then:new this.constructor(b),fulfilled:t,rejected:e};return this.state_===j||this.state_===x?r(f,n):this.then_.push(n),n.then},"catch":function(t){return this.then(null,t)}},y.all=function(t){var e=this;if(!n(t))throw new TypeError("You must pass an array to Promise.all().");return new e(function(e,n){function o(t){return u++,function(n){r[t]=n,--u||e(r)}}for(var i,r=[],u=0,f=0;f<t.length;f++)i=t[f],i&&"function"==typeof i.then?i.then(o(f),n):r[f]=i;u||e(r)})},y.race=function(t){var e=this;if(!n(t))throw new TypeError("You must pass an array to Promise.race().");return new e(function(e,n){for(var o,i=0;i<t.length;i++)o=t[i],o&&"function"==typeof o.then?o.then(e,n):e(o)})},y.resolve=function(t){var e=this;return t&&"object"==typeof t&&t.constructor===e?t:new e(function(e){e(t)})},y.reject=function(t){var e=this;return new e(function(e,n){n(t)})}}("undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var o=t("es6-promise-polyfill").Promise,i=new window.AudioContext,r=i.destination,u=function(t){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",this.promise=new o(function(t,n){e.onload=function(){i.decodeAudioData(e.response,function(e){t(e)},function(){n("decodeAudioData error")})},e.onerror=function(){n(this.statusText)}}),e.send()};u.prototype={accessBuffer:function(t,e){this.promise.then(t,e)},play:function(t,e){return this.accessBuffer(function(n){var o=i.createBufferSource();o.buffer=n,o.connect(r),t=t||0,e=e||n.duration-t,o.start(0,t,e)}),this}},u.audioContext=i,e.exports=u},{"es6-promise-polyfill":1}],3:[function(t,e,n){"use strict";var o=t("es6-promise-polyfill").Promise,i=function(t){var e=this.tag=document.createElement("audio");this.tag.preload="auto",this.tag.src=t,this.promise=new o(function(t,n){e.oncanplaythrough=function(){e.oncanplaythrough=null,t(e)},e.onerror=function(t){n(t)}}),document.body.appendChild(this.tag)};i.prototype={play:function(t,e){this.readyPromise.then(function(n){t=t||0,e=e||n.duration-t,n.currentTime=t,n.play(),e<n.duration-t&&setTimeout(function(){n.pause()},1e3*e)})}},e.exports=i},{"es6-promise-polyfill":1}],4:[function(t,e,n){"use strict";var o=t("es6-promise-polyfill").Promise,i=function(){},r=function(){};r.prototype={accessBuffer:i,play:i,promise:o.resolve()},e.exports=r},{"es6-promise-polyfill":1}],5:[function(t,e,n){"use strict";var o="function"==typeof AudioContext&&"string"==typeof(new XMLHttpRequest).responseType;if(o)e.exports=t("./audioclip-audio-api.js");else{var i=!!document.createElement("audio").canPlayType;i?e.exports=t("./audioclip-audio-tag.js"):e.exports=t("./audioclip-null.js")}},{"./audioclip-audio-api.js":2,"./audioclip-audio-tag.js":3,"./audioclip-null.js":4}]},{},[5])(5)});
